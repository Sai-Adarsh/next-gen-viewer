<div>
	<mat-sidenav-container class="example-container">
    <!--
		<mat-sidenav #sidenav7 mode="side" position="end" role="navigation" class="example-sidenav">
        <br /><br />
        <mat-card-header>
          <mat-card-title>Development Tools</mat-card-title>
        </mat-card-header><p> </p>
        <button (click)="this.deleteDrawing()" mat-raised-button>
          <mat-icon>undo</mat-icon>
        </button>&nbsp;
        <button (click)="this.redoDrawing()" mat-raised-button>
          <mat-icon>redo</mat-icon>
        </button>&nbsp;
        <button color="accent" (click)="sidenav1.toggle(); sidenav7.toggle()" mat-raised-button>
          Toggle <mat-icon>toggle_off</mat-icon>
        </button><p> </p>
        <mat-accordion>
          <mat-expansion-panel (opened)="panelOpenState = true"
                              (closed)="panelOpenState = false">
            <mat-expansion-panel-header>
              <mat-panel-title>
                Colour Intensity
              </mat-panel-title>
            </mat-expansion-panel-header>
            <button (click)="resetToDefault()" color="primary" mat-raised-button>
              Reset to default
            </button><p> </p>
            Invert
            <mat-slider
              thumbLabel
              (change)="this.onInvertChange($event)"
              min="1"
              max="100"></mat-slider><p> </p>
            Hue
            <mat-slider
              thumbLabel
              (change)="this.onHueChange($event)"
              min="0"
              max="360"></mat-slider><p> </p>
            Saturation
            <mat-slider
              thumbLabel
              (change)="this.onSaturationChange($event)"
              min="1"
              max="100"></mat-slider><p> </p>
          </mat-expansion-panel>
        </mat-accordion><p> </p>
    </mat-sidenav>-->
    
    <mat-sidenav #sidenav1 opened mode="side" position="end" role="navigation" class="example-sidenav">
      <center>
        <button mat-icon-button color="accent">
          <mat-icon>build</mat-icon>
        </button>
      </center><p> </p>
      
      <hr style="height:2px;border-width:0;color:gray;background-color:gray"><p> </p>
      <!--<button mat-mini-fab color="accent" (click)="sidenav1.toggle(); sidenav7.toggle()" mat-raised-button>
        <mat-icon>toggle_on</mat-icon>
      </button><p> </p>-->
      <mat-accordion>
        <mat-expansion-panel (opened)="panelOpenState = true; this.changeHeaderTest('Annotation Tools');"
                            (closed)="panelOpenState = false; this.changeHeaderTest('Home');">
          <mat-expansion-panel-header>
            <mat-panel-title>
              <mat-icon>create</mat-icon>
            </mat-panel-title>
          </mat-expansion-panel-header>
          <button (mouseenter) ="this.changeHeaderTest('Point Annotation');"  (mouseleave) ="this.changeHeaderTest('Annotation Tools');" (click)="this.addInteraction('Point')" mat-raised-button>
            <mat-icon>group_work</mat-icon>
          </button><p> </p>
          <button (mouseenter) ="this.changeHeaderTest('LineString');"  (mouseleave) ="this.changeHeaderTest('Annotation Tools');" (click)="this.addInteraction('LineString')" mat-raised-button>
            <mat-icon>clear_all</mat-icon>
          </button><p> </p>
          <button (mouseenter) ="this.changeHeaderTest('Polygon');"  (mouseleave) ="this.changeHeaderTest('Annotation Tools');" (click)="this.addInteraction('Polygon')" mat-raised-button>
            <mat-icon>change_history</mat-icon>
          </button><p> </p>
          <button (mouseenter) ="this.changeHeaderTest('Circle');"  (mouseleave) ="this.changeHeaderTest('Annotation Tools');" (click)="this.addInteraction('Circle')" mat-raised-button>
            <mat-icon>circle</mat-icon>
          </button><p> </p>
          <button (mouseenter) ="this.changeHeaderTest('Remove Interaction');"  (mouseleave) ="this.changeHeaderTest('Annotation Tools');" (click)="this.removeInteraction()" mat-raised-button color="primary" aria-label="Example icon button with a menu icon">
              <mat-icon>clear</mat-icon>
          </button><p> </p>
          <button (mouseenter) ="this.changeHeaderTest('Delete Annotations');"  (mouseleave) ="this.changeHeaderTest('Annotation Tools');" (click)="this.deleteDrawing()" mat-raised-button color="primary" aria-label="Example icon button with a menu icon">
              <mat-icon>delete</mat-icon>
          </button>
        </mat-expansion-panel><p> </p>

        <mat-expansion-panel (opened)="panelOpenState = true; this.changeHeaderTest('Union & Difference');"
                            (closed)="panelOpenState = false; this.changeHeaderTest('Home');">
          <mat-expansion-panel-header>
            <mat-panel-title>
              <mat-icon>add_circle</mat-icon>
            </mat-panel-title>
          </mat-expansion-panel-header>
          <button (mouseenter) ="this.changeHeaderTest('Add Polygon');"  (mouseleave) ="this.changeHeaderTest('Union & Difference');"  (click)="this.addPolygons()" mat-raised-button>
            <mat-icon>add_circle</mat-icon>
          </button><p> </p>
          <button (mouseenter) ="this.changeHeaderTest('Erase Polygon');"  (mouseleave) ="this.changeHeaderTest('Union & Difference');" (click)="this.erasePolygons()" mat-raised-button>
            <mat-icon>remove_circle</mat-icon>
          </button><p> </p>
          <button (mouseenter) ="this.changeHeaderTest('Combine');"  (mouseleave) ="this.changeHeaderTest('Union & Difference');"(click)="this.combine()" mat-raised-button color="primary" aria-label="Example icon button with a menu icon">
            <mat-icon>swap_horizontal</mat-icon>
          </button>
        </mat-expansion-panel><p> </p>

          <mat-expansion-panel (opened)="panelOpenState = true; this.changeHeaderTest('Save & Load');"
          (closed)="panelOpenState = false; this.changeHeaderTest('Home');">
            <mat-expansion-panel-header>
            <mat-panel-title>
              <mat-icon> cloud</mat-icon>
            </mat-panel-title>
            </mat-expansion-panel-header>
              <button (mouseenter) ="this.changeHeaderTest('Save Polygon');"  (mouseleave) ="this.changeHeaderTest('Save & Load');"  (click)="openSnackBar('Saving Polygons to firebase', 'Dismiss'); savePolygonsToFirebase()" mat-raised-button>
                <mat-icon>cloud_import</mat-icon>
              </button><p> </p>
              <button (mouseenter) ="this.changeHeaderTest('Retrieve Polygon');"  (mouseleave) ="this.changeHeaderTest('Save & Load');" (click)="retrievePolygonsFromFirebase(); openSnackBar('Retrieving Polygons to firebase', 'Dismiss')" mat-raised-button>
                <mat-icon>cloud_download</mat-icon>
              </button><p> </p>
              <!--
              <button (mouseenter) ="this.changeHeaderTest('Load Polygon');"  (mouseleave) ="this.changeHeaderTest('Save & Load');" (click)="loadPolygonsFromFirebase()" mat-raised-button color="primary" aria-label="Example icon button with a menu icon">
                <mat-icon>publish</mat-icon>
              </button>
              -->
              
          </mat-expansion-panel><p> </p>


          <mat-expansion-panel (opened)="panelOpenState = true; this.changeHeaderTest('Import & Export');"
          (closed)="panelOpenState = false; this.changeHeaderTest('Home');">
            <mat-expansion-panel-header>
            <mat-panel-title>
              <mat-icon>folder</mat-icon>
            </mat-panel-title>
            </mat-expansion-panel-header>
              <input #file type="file" style="display:none;" (change)="this.importFile($event)" />
              <button (mouseenter) ="this.changeHeaderTest('Import Features');"  (mouseleave) ="this.changeHeaderTest('Import & Export');"  (click)="openSnackBar('Importing', 'Dismiss'); file.click();" mat-raised-button>
                <mat-icon>create_new_folder</mat-icon>
              </button><p> </p>
              <button (mouseenter) ="this.changeHeaderTest('Export Features');"  (mouseleave) ="this.changeHeaderTest('Import & Export');" (click)="openSnackBar('Exporting', 'Dismiss'); this.exportFile();" mat-raised-button>
                <mat-icon>cloud_download</mat-icon>
              </button><p> </p>
              <!--
              <button (mouseenter) ="this.changeHeaderTest('Load Polygon');"  (mouseleave) ="this.changeHeaderTest('Save & Load');" (click)="loadPolygonsFromFirebase()" mat-raised-button color="primary" aria-label="Example icon button with a menu icon">
                <mat-icon>publish</mat-icon>
              </button>
              -->
              
          </mat-expansion-panel><p> </p>

      </mat-accordion>
    </mat-sidenav>

		<mat-sidenav-content>
			<mat-sidenav-container class="example-map-container">
				<mat-sidenav #sidenav2 mode="side" position="start" role="navigation" class="example-sidenav">

					<div fxLayout="column" class="sidenav-normal">
            <center>
              <button mat-fab color="primary" (click)="sidenav2.toggle()">
                <mat-icon>menu</mat-icon>
              </button>
            </center><br />
            <mat-accordion>
              <mat-expansion-panel #panel1 (opened)="panelOpenState = true; this.changeHeaderTest('Brain Information');"
                                   (closed)="panelOpenState = false; this.changeHeaderTest('Home');">
                <mat-expansion-panel-header>
                  <mat-panel-title>
                    Brain Information
                  </mat-panel-title>
                </mat-expansion-panel-header>
                <br>
                <mat-form-field appearance="outline">
                  <mat-label>Brain ID</mat-label>
                  <input (change)="this.getBrainIDUpdated($event)"matInput placeholder="E.g. 4240">
                </mat-form-field>
                <mat-form-field appearance="outline">
                  <mat-label>Section No</mat-label>
                  <input (change)="this.emailUpdated($event)" matInput placeholder="E.g. 25">
                </mat-form-field><p> </p>
                <form>
                  <mat-form-field appearance="fill">
                    <mat-label>Select Tracer</mat-label>
                    <mat-select [(ngModel)]="selectedValue" name="tracer">
                      <mat-option *ngFor="let tracer of tracers" [value]="tracer.value">
                        {{tracer.viewValue}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </form>
                <!--
                  <mat-slide-toggle
                      color="primary"
                      (change)="this.onToggleTracer($event)"
                      class="example-margin"
                      [checked]="checked"
                      [disabled]="disabled">
                    Toggle Tracer
                  </mat-slide-toggle>
                -->  
             
                <mat-card-actions>
                  <button style="right:-60%;padding:8px;width:40%;" (click)="this.brainIDUpdated()" color="primary" mat-raised-button>Load Brain</button>                
                </mat-card-actions>
              </mat-expansion-panel><br>
              <mat-expansion-panel #panel2 (opened)="panelOpenState = true; this.changeHeaderTest('Atlas');"
                                   (closed)="panelOpenState = false; this.changeHeaderTest('Home');">
                <mat-expansion-panel-header>
                  <mat-panel-title>
                    Atlas
                  </mat-panel-title>
                </mat-expansion-panel-header>
                <!--
                  <button (click)="this.displayFeatures();" mat-raised-button>
                    <mat-icon>cloud_download</mat-icon>
                  </button><p> </p>
                -->
                
                <button  color="primary" (click)="this.onClick('show')" mat-raised-button >Show atlas</button>
                <button  color="primary" (click)="this.onClick('hide')" style="left:10%;" mat-raised-button>Hide atlas</button>
              <br><br>

                <div class="menu-overflow-hidden" id="jstree_block" style="height: calc(50% - 2px); margin-left: 10px;">
                  <div class="active-pink-3 active-pink-4 mb-4">                    
                      <mat-form-field style="width:100%" appearance="fill" >
                        <mat-label>Region Name</mat-label>
                        <input class="form-control search-input" (change)="this.Tree($event);" matInput placeholder="E.g. Hypothalamus">
                      </mat-form-field>
                   </div>
                  <div style="white-space: nowrap; font-family: 'Big Shoulders Stencil Display', cursive; font-family: 'Roboto', sans-serif;" id='atlas_info'></div>
                </div>
              </mat-expansion-panel><p></p>
              <mat-expansion-panel (opened)="panelOpenState = true; this.changeHeaderTest('Injection Region');"
                                   (closed)="panelOpenState = false; this.changeHeaderTest('Home');">
                <mat-expansion-panel-header>
                  <mat-panel-title>
                    Injection Region
                  </mat-panel-title>
                </mat-expansion-panel-header>
              </mat-expansion-panel><p></p>
              <mat-expansion-panel (opened)="panelOpenState = true; this.changeHeaderTest('Process Annotation');"
                                   (closed)="panelOpenState = false; this.changeHeaderTest('Home');">
                <mat-expansion-panel-header>
                  <mat-panel-title>
                    Process Annotation
                  </mat-panel-title>
                </mat-expansion-panel-header>
              </mat-expansion-panel><p></p>
              <mat-expansion-panel (opened)="panelOpenState = true; this.changeHeaderTest('Point Annotation');"
                                   (closed)="panelOpenState = false; this.changeHeaderTest('Home');">
                <mat-expansion-panel-header>
                  <mat-panel-title>
                    Point Annotation
                  </mat-panel-title>
                </mat-expansion-panel-header>
              </mat-expansion-panel><p></p>
              
                  <mat-expansion-panel (opened)="panelOpenState = true; this.changeHeaderTest('Development Tools');"
                                      (closed)="panelOpenState = false; this.changeHeaderTest('Home');">
                    <mat-expansion-panel-header>
                      <mat-panel-title>
                        Development Tools
                      </mat-panel-title>
                    </mat-expansion-panel-header>
                    <mat-accordion>
                      <mat-expansion-panel (opened)="panelOpenState = true; this.changeHeaderTest('Development Tool | REPL');"
                                      (closed)="panelOpenState = false; this.changeHeaderTest('Development Tool');">
                    <mat-expansion-panel-header>
                      <mat-panel-title>
                        REPL
                      </mat-panel-title>
                    </mat-expansion-panel-header>
                    <mat-card-content>
                      <form>
                        <mat-form-field mat-form-field appearance="standard">
                          <input type="text"
                                id = "replID"
                                placeholder="Command line"
                                aria-label="Number"
                                matInput
                                [formControl]="myControl"
                                [matAutocomplete]="auto">
                          <mat-autocomplete #auto="matAutocomplete">
                            <mat-option *ngFor="let option of filteredOptions | async" [value]="option">
                              {{option}}
                            </mat-option>
                          </mat-autocomplete>
                        </mat-form-field>
                      </form>
                      <mat-card-actions>
                        <button color="primary" (click)="this.REPL()" mat-raised-button>Run Command</button>
                      </mat-card-actions>
                    </mat-card-content>
                  </mat-expansion-panel><p> </p>

                  <mat-expansion-panel (opened)="panelOpenState = true; this.changeHeaderTest('Development Tool | Colour Intensity');"
                                (closed)="panelOpenState = false; this.changeHeaderTest('Development Tool');">
                    <mat-expansion-panel-header>
                      <mat-panel-title>
                        Colour Intensity
                      </mat-panel-title>
                    </mat-expansion-panel-header>
                    <button (click)="resetToDefault()" color="primary" mat-raised-button>
                      Reset to default
                    </button><p> </p>
                    Invert
                    <mat-slider
                      thumbLabel
                      (change)="this.onInvertChange($event)"
                      min="1"
                      max="100"></mat-slider><p> </p>
                    Hue
                    <mat-slider
                      thumbLabel
                      (change)="this.onHueChange($event)"
                      min="0"
                      max="360"></mat-slider><p> </p>
                    Saturation
                    <mat-slider
                      thumbLabel
                      (change)="this.onSaturationChange($event)"
                      min="1"
                      max="100"></mat-slider><p> </p>
                  </mat-expansion-panel><p> </p>

                  <mat-expansion-panel (opened)="panelOpenState = true; this.changeHeaderTest('Development Tool | Layers');"
                                   (closed)="panelOpenState = false; this.changeHeaderTest('Development Tool');">
                <!-- <mat-expansion-panel-header>
                  <mat-panel-title>
                    Layers
                  </mat-panel-title>
                </mat-expansion-panel-header> -->
                <!-- <mat-slide-toggle
                    color="primary"
                    (change)="this.onToggle($event)"
                    class="example-margin"
                    [checked]="checked"
                    [disabled]="disabled">
                  GeoJSON
                </mat-slide-toggle><p> </p> -->
              </mat-expansion-panel><p></p>
                </mat-accordion>
              </mat-expansion-panel><p> </p>
              
            </mat-accordion><p> </p>

					</div>

				</mat-sidenav>
				<mat-sidenav-content>
					<mat-toolbar role="toolbar" class="main-header mat-elevation-z1 sticky-header">
              <button mat-icon-button class="example-icon" (click)="sidenav2.toggle()"  aria-label="Example icon-button with menu icon">
                <mat-icon>menu</mat-icon>
              </button>
              <span>Next Gen Viewer</span>&nbsp;&nbsp;
              <mat-chip-list aria-label="Fish selection">
                <mat-chip>{{ this.headerTest }}</mat-chip>
              </mat-chip-list>
             
              <!--<button (click)="this.deleteDrawing()" mat-raised-button>
                <mat-icon>undo</mat-icon>
              </button>&nbsp;
              <button (click)="this.redoDrawing()" mat-raised-button>
                <mat-icon>redo</mat-icon>
              </button>&nbsp;
              <button color="accent" (click)="sidenav1.toggle(); sidenav7.toggle()" mat-raised-button>
                Toggle <mat-icon>settings</mat-icon>
              </button>&nbsp;-->
              <span class="example-spacer"></span>
              <p>  </p>
              <button mat-icon-button class="example-icon" aria-label="Example icon-button with share icon">
              <mat-icon>share</mat-icon>
              </button>
					</mat-toolbar>
          <mat-progress-bar mode="determinate" [value]="progress" *ngIf="progress > 0" ng-hide="progress=100" class="progress-striped active" color="warn"></mat-progress-bar>
          <div class="example-sidenav-content">
            <div id="map" class="map"></div>
          </div> 

				</mat-sidenav-content>
			</mat-sidenav-container>
		</mat-sidenav-content>
	</mat-sidenav-container>
</div>